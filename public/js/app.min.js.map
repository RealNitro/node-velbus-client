{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","build/js/VMB4RYNO.js","app.min.js","build/js/app.js","build/js/client.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","VMB4RYNO","element","send","checkbox","message","this","address","data","channel","$","append","bootstrapToggle","change","_this","prop","find","off","command","on","JSON","stringify","prototype","process",2,"Client","document","ready","node_velbus_client_config","server","./client",3,"modules","bind","fn","me","apply","arguments","components","connection","WebSocket","protocol","host","port","onerror","error","console","log","onmessage","error1","parse","constructor","warn","each","index","icon_class","bootbox","alert","json","counter","readyState","setTimeout","./VMB4RYNO"],"mappings":"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","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function() {\n  var VMB4RYNO;\n\n  VMB4RYNO = (function() {\n    function VMB4RYNO(element, send) {\n      var checkbox, message;\n      this.element = element;\n      message = {\n        address: this.element.data('address'),\n        channel: this.element.data('channel')\n      };\n      checkbox = $('<input type=\"checkbox\">');\n      this.element.append(checkbox);\n      checkbox.bootstrapToggle();\n      checkbox.change((function(_this) {\n        return function() {\n          if (checkbox.prop('checked')) {\n            _this.element.find('input').data('bs.toggle').off(true);\n            message.command = 'switch_relay_on';\n          } else {\n            _this.element.find('input').data('bs.toggle').on(true);\n            message.command = 'switch_relay_off';\n          }\n          send(JSON.stringify(message));\n        };\n      })(this));\n      message.command = 'relay_status_request';\n      send(JSON.stringify(message));\n      return;\n    }\n\n    VMB4RYNO.prototype.process = function(data) {\n      switch (data.message) {\n        case 'relay_channel_on':\n          return this.element.find('input').data('bs.toggle').on(true);\n        case 'relay_channel_off':\n          return this.element.find('input').data('bs.toggle').off(true);\n        default:\n          throw new Error('message_not_supported');\n      }\n    };\n\n    return VMB4RYNO;\n\n  })();\n\n  module.exports = VMB4RYNO;\n\n}).call(this);\n","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function() {\n  var VMB4RYNO;\n\n  VMB4RYNO = (function() {\n    function VMB4RYNO(element, send) {\n      var checkbox, message;\n      this.element = element;\n      message = {\n        address: this.element.data('address'),\n        channel: this.element.data('channel')\n      };\n      checkbox = $('<input type=\"checkbox\">');\n      this.element.append(checkbox);\n      checkbox.bootstrapToggle();\n      checkbox.change((function(_this) {\n        return function() {\n          if (checkbox.prop('checked')) {\n            _this.element.find('input').data('bs.toggle').off(true);\n            message.command = 'switch_relay_on';\n          } else {\n            _this.element.find('input').data('bs.toggle').on(true);\n            message.command = 'switch_relay_off';\n          }\n          send(JSON.stringify(message));\n        };\n      })(this));\n      message.command = 'relay_status_request';\n      send(JSON.stringify(message));\n      return;\n    }\n\n    VMB4RYNO.prototype.process = function(data) {\n      switch (data.message) {\n        case 'relay_channel_on':\n          return this.element.find('input').data('bs.toggle').on(true);\n        case 'relay_channel_off':\n          return this.element.find('input').data('bs.toggle').off(true);\n        default:\n          throw new Error('message_not_supported');\n      }\n    };\n\n    return VMB4RYNO;\n\n  })();\n\n  module.exports = VMB4RYNO;\n\n}).call(this);\n\n},{}],2:[function(require,module,exports){\n(function() {\n  var Client;\n\n  Client = require('./client');\n\n  $(document).ready(function() {\n    new Client(node_velbus_client_config.server);\n  });\n\n}).call(this);\n\n},{\"./client\":3}],3:[function(require,module,exports){\n(function() {\n  var Client, modules,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  modules = {\n    VMB4RYNO: require('./VMB4RYNO')\n  };\n\n  Client = (function() {\n    function Client(server) {\n      this.send = bind(this.send, this);\n      var components;\n      this.connection = new WebSocket(server.protocol + '://' + server.host + ':' + server.port);\n      this.connection.onerror = function(error) {\n        console.log('WebSocket Error ' + error);\n      };\n      this.connection.onmessage = function(message) {\n        var data, element, error, error1;\n        data = JSON.parse(message.data);\n        element = $((\"[data-address='\" + data.address + \"']\") + (\"[data-channel='\" + data.channel + \"']\"));\n        if ((data.address + '_' + data.channel) in components) {\n          try {\n            components[data.address + '_' + data.channel].process(data);\n          } catch (error1) {\n            error = error1;\n            console.log(error);\n            this.constructor.warn('Unsupported message received.');\n          }\n        }\n      };\n      components = {};\n      $('.velbus').each((function(_this) {\n        return function(index, element) {\n          components[($(element).data('address')) + '_' + ($(element).data('channel'))] = new modules[$(element).data('module')]($(element), _this.send);\n        };\n      })(this));\n      return;\n    }\n\n    Client.warn = function(message) {\n      var icon_class;\n      icon_class = 'glyphicon glyphicon-exclamation-sign';\n      bootbox.alert({\n        message: \"<span class='\" + icon_class + \"' aria-hidden='true' /> \" + message\n      });\n    };\n\n    Client.prototype.send = function(json, counter) {\n      if (counter == null) {\n        counter = 0;\n      }\n      if (this.connection.readyState) {\n        this.connection.send(json);\n      } else {\n        if (counter === 10) {\n          this.constructor.warn('Cannot connect to server.');\n          return;\n        }\n        setTimeout(((function(_this) {\n          return function() {\n            _this.send(json, counter + 1);\n          };\n        })(this)), 100);\n      }\n    };\n\n    return Client;\n\n  })();\n\n  module.exports = Client;\n\n}).call(this);\n\n},{\"./VMB4RYNO\":1}]},{},[2])\n\n","(function() {\n  var Client;\n\n  Client = require('./client');\n\n  $(document).ready(function() {\n    new Client(node_velbus_client_config.server);\n  });\n\n}).call(this);\n","(function() {\n  var Client, modules,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  modules = {\n    VMB4RYNO: require('./VMB4RYNO')\n  };\n\n  Client = (function() {\n    function Client(server) {\n      this.send = bind(this.send, this);\n      var components;\n      this.connection = new WebSocket(server.protocol + '://' + server.host + ':' + server.port);\n      this.connection.onerror = function(error) {\n        console.log('WebSocket Error ' + error);\n      };\n      this.connection.onmessage = function(message) {\n        var data, element, error, error1;\n        data = JSON.parse(message.data);\n        element = $((\"[data-address='\" + data.address + \"']\") + (\"[data-channel='\" + data.channel + \"']\"));\n        if ((data.address + '_' + data.channel) in components) {\n          try {\n            components[data.address + '_' + data.channel].process(data);\n          } catch (error1) {\n            error = error1;\n            console.log(error);\n            this.constructor.warn('Unsupported message received.');\n          }\n        }\n      };\n      components = {};\n      $('.velbus').each((function(_this) {\n        return function(index, element) {\n          components[($(element).data('address')) + '_' + ($(element).data('channel'))] = new modules[$(element).data('module')]($(element), _this.send);\n        };\n      })(this));\n      return;\n    }\n\n    Client.warn = function(message) {\n      var icon_class;\n      icon_class = 'glyphicon glyphicon-exclamation-sign';\n      bootbox.alert({\n        message: \"<span class='\" + icon_class + \"' aria-hidden='true' /> \" + message\n      });\n    };\n\n    Client.prototype.send = function(json, counter) {\n      if (counter == null) {\n        counter = 0;\n      }\n      if (this.connection.readyState) {\n        this.connection.send(json);\n      } else {\n        if (counter === 10) {\n          this.constructor.warn('Cannot connect to server.');\n          return;\n        }\n        setTimeout(((function(_this) {\n          return function() {\n            _this.send(json, counter + 1);\n          };\n        })(this)), 100);\n      }\n    };\n\n    return Client;\n\n  })();\n\n  module.exports = Client;\n\n}).call(this);\n"],"sourceRoot":"/source/"}